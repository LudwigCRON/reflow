Version 4
SHEET 1 1776 832
WIRE 192 160 160 160
WIRE 288 160 192 160
WIRE 464 160 352 160
WIRE 544 160 464 160
WIRE 816 160 784 160
WIRE 992 160 960 160
WIRE 1152 160 1120 160
WIRE 784 192 784 160
WIRE 960 192 960 160
WIRE 1120 192 1120 160
WIRE 160 272 160 160
WIRE 464 272 464 240
WIRE 480 480 448 480
WIRE 448 512 448 480
FLAG 464 352 0
FLAG 160 352 0
FLAG 544 160 out
IOPIN 544 160 Out
FLAG 784 272 0
FLAG 192 160 in
FLAG 816 160 out_ref
IOPIN 816 160 Out
FLAG 448 592 0
FLAG 480 480 error
IOPIN 480 480 Out
FLAG 1120 272 0
FLAG 1152 160 Trc
IOPIN 1152 160 Out
FLAG 960 272 0
FLAG 992 160 phase
IOPIN 992 160 Out
SYMBOL voltage 160 256 R0
SYMATTR InstName V1
SYMATTR Value SINE(1.65 0.5 {F})
SYMBOL voltage 464 256 R0
SYMATTR InstName V2
SYMATTR Value 1.2
SYMBOL cap 352 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL res 448 144 R0
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL bv 784 176 R0
WINDOW 3 -90 183 Left 2
SYMATTR Value V=delay((V(in)-1.65)*fof_mod(V(Trc), 100Meg), V(phase))+1.2
SYMATTR InstName B1
SYMBOL bv 448 496 R0
SYMATTR InstName B2
SYMATTR Value V=abs(V(out_ref)-delay(V(out), 1/100Meg)) > 4m
SYMBOL voltage 1120 176 R0
SYMATTR InstName V3
SYMATTR Value {pirc}
SYMBOL bv 960 176 R0
WINDOW 3 -266 150 Left 2
SYMATTR Value V=(1-2*fof_phase(1.2, 1.65, V(Trc), 100Meg)/pi)/100Meg
SYMATTR InstName B3
TEXT 96 80 Left 2 ;DUT
TEXT 712 80 Left 2 ;REF
TEXT 112 496 Left 2 !.param F=100Meg\n.param C=1p\n.param R=100k\n.param pirc={pi*R*C}\n.tran 0 {80/F}
TEXT 688 392 Left 2 !.function fof_mod_den(pirc, f)=sqrt(1+(2*pirc*f)**2)\n.function fof_mod(pirc, f)=2*pirc*f/fof_mod_den(pirc, f)\n.function fof_phase(a, b, pirc, f)=atan(((b-a)*pirc*2*f)/(a+b*(2*pirc*f)**2))
LINE Normal 860 56 968 56 2
LINE Normal 1012 56 1080 60 3
LINE Normal 1124 60 1204 60 4
LINE Normal 800 56 828 56
LINE Normal 1244 64 1308 60 1
RECTANGLE Normal 92 100 628 396 2
RECTANGLE Normal 672 100 1560 484 1
